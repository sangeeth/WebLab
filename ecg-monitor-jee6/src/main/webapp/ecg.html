<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ECG Waveform</title>
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/ecgmonitor.js"></script>

<script type="text/javascript">
var app = {
	   ecgMonitor : null,
	   feedUrl: 'ecgfeed',
	   listen: function() {
	      $('#comet-frame').attr('src',  this.feedUrl);
	      console.log("Listening now at ", this.feedUrl);
	   },
	   update: function(data) {
		   console.log(data);
		   this.ecgMonitor.enque(data.list); 
	   }
};
		
$(window).load(function () {
	ecgMonitor = new ECGMonitor(/*canvasId=*/"#canvas");
	ecgMonitor.startup();
	
	app.ecgMonitor = ecgMonitor;
	app.listen();
});
</script>
</head>
<body style="background-color: black">
	<canvas id="canvas" width="600" height="230"></canvas>
	<iframe id="comet-frame" style="display: none"></iframe>
</body>
</html>